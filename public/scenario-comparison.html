<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Umfassender Szenario-Vergleich - ETF-Sparplan Rechner</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="js/features/scenarioComparison.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>ğŸ“Š Umfassender Szenario-Vergleich</h1>
            <p class="subtitle">Vergleichen Sie bis zu 6 verschiedene Finanzstrategien mit detaillierter Analyse und umfassenden Visualisierungen</p>
            
            <!-- Navigation -->
            <div class="navigation-section">
                <div class="phase-toggle navigation">
                    <button class="phase-button back-button" onclick="window.location.href='etf_savings.html'">
                        â¬…ï¸ ZurÃ¼ck zur Hauptanwendung
                    </button>
                    <button class="phase-button active scenario-button">
                        ğŸ“Š Szenario-Vergleich
                    </button>
                </div>
                <div class="navigation-hint">
                    ğŸ’¡ Erstellen Sie verschiedene Szenarien und vergleichen Sie deren Performance in Echtzeit
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Scenario Management Section -->
            <div class="scenario-management-container">
                <div class="section-header">
                    <h2 class="section-title">ğŸ¯ Szenario-Management</h2>
                    <div class="management-controls">
                        <button class="btn btn-secondary" id="loadPresetBtn">
                            ğŸ“‹ Vorlagen laden
                        </button>
                        <button class="btn btn-secondary" id="saveConfigBtn">
                            ğŸ’¾ Konfiguration speichern
                        </button>
                        <button class="btn btn-primary" id="exportComparisonBtn">
                            ğŸ“¤ Daten exportieren
                        </button>
                    </div>
                </div>

                <!-- Preset Templates (Initially Hidden) -->
                <div class="preset-templates-section" id="presetTemplatesSection" style="display: none;">
                    <h3 class="preset-title">ğŸ“š Vordefinierte Strategien</h3>
                    <div class="preset-grid">
                        <div class="preset-card" data-preset="conservative">
                            <div class="preset-icon">ğŸ›¡ï¸</div>
                            <h4 class="preset-name">Konservative Strategie</h4>
                            <p class="preset-description">Niedrige Rendite (5%), sichere Anlagen, lÃ¤ngere Laufzeiten</p>
                            <div class="preset-features">
                                <span class="feature-tag">Niedrig Risiko</span>
                                <span class="feature-tag">Stabil</span>
                            </div>
                        </div>
                        <div class="preset-card" data-preset="balanced">
                            <div class="preset-icon">âš–ï¸</div>
                            <h4 class="preset-name">Ausgewogene Strategie</h4>
                            <p class="preset-description">Moderate Rendite (7%), ETF-Mix, ausgewogenes Risiko</p>
                            <div class="preset-features">
                                <span class="feature-tag">Mittleres Risiko</span>
                                <span class="feature-tag">Diversifiziert</span>
                            </div>
                        </div>
                        <div class="preset-card" data-preset="aggressive">
                            <div class="preset-icon">ğŸš€</div>
                            <h4 class="preset-name">Wachstumsorientiert</h4>
                            <p class="preset-description">Hohe Rendite (10%), Tech-Focus, hÃ¶heres Risiko</p>
                            <div class="preset-features">
                                <span class="feature-tag">Hohes Risiko</span>
                                <span class="feature-tag">Hoher Ertrag</span>
                            </div>
                        </div>
                        <div class="preset-card" data-preset="lifecycle">
                            <div class="preset-icon">ğŸ”„</div>
                            <h4 class="preset-name">Lebenszyklus-Ansatz</h4>
                            <p class="preset-description">3 Szenarien fÃ¼r verschiedene Lebensphasen</p>
                            <div class="preset-features">
                                <span class="feature-tag">Phasenbasiert</span>
                                <span class="feature-tag">Umfassend</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scenario Tabs -->
                <div class="scenario-tabs-container">
                    <div class="scenario-tabs" id="scenarioTabs">
                        <button class="scenario-tab active" data-scenario="A">
                            <span class="tab-emoji">ğŸ“ˆ</span>
                            <span class="tab-name">Basis-Szenario</span>
                        </button>
                        <button class="scenario-tab" data-scenario="B">
                            <span class="tab-emoji">ğŸ“Š</span>
                            <span class="tab-name">Vergleichs-Szenario</span>
                        </button>
                        <button class="add-scenario-btn" id="addScenarioBtn" title="Neues Szenario hinzufÃ¼gen">
                            â• HinzufÃ¼gen
                        </button>
                    </div>
                </div>
            </div>

            <!-- Configuration Panels Container -->
            <div class="configuration-panels" id="configurationPanels">
                <!-- Scenario configuration panels will be dynamically inserted here -->
            </div>

            <!-- Visualization Section -->
            <div class="visualization-section">
                <!-- Scenario Visibility Controls -->
                <div class="visibility-controls-section">
                    <h3 class="controls-title">ğŸ‘ï¸ Sichtbare Szenarien</h3>
                    <div class="visibility-controls" id="visibilityControls">
                        <!-- Dynamically generated visibility checkboxes -->
                    </div>
                </div>

                <!-- Chart View Selection -->
                <div class="chart-view-section">
                    <h2 class="section-title">ğŸ“ˆ Visualisierungsoptionen</h2>
                    <div class="chart-view-tabs">
                        <button class="chart-view-tab active" data-view="lifecycle">
                            ğŸ”„ Kompletter Lebenszyklus
                        </button>
                        <button class="chart-view-tab" data-view="accumulation">
                            ğŸ“ˆ Ansparphase Detail
                        </button>
                        <button class="chart-view-tab" data-view="withdrawal">
                            ğŸ–ï¸ Entnahmephase Detail
                        </button>
                        <button class="chart-view-tab" data-view="metrics">
                            ğŸ¯ Metriken-Radar
                        </button>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="chart-container-wrapper">
                    <div class="chart-container">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>

                <!-- Results Summary Cards -->
                <div class="results-summary-section">
                    <h3 class="section-title">ğŸ“‹ Ergebnis-Ãœbersicht</h3>
                    <div class="results-grid" id="resultsGrid">
                        <!-- Dynamic result cards will be inserted here -->
                    </div>
                </div>

                <!-- Parameter Comparison Table -->
                <div class="parameter-comparison-section">
                    <div class="table-section-header">
                        <h3 class="section-title">ğŸ“Š Parameter-Vergleichstabelle</h3>
                        <div class="table-controls">
                            <label for="parameterFilter" class="filter-label">Kategorie filtern:</label>
                            <select id="parameterFilter" class="filter-select">
                                <option value="all">Alle Parameter anzeigen</option>
                                <option value="budget">ğŸ’° Budget-Planung</option>
                                <option value="accumulation">ğŸ“ˆ Ansparphase</option>
                                <option value="withdrawal">ğŸ–ï¸ Entnahmephase</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container" id="parameterTableContainer">
                        <!-- Dynamic parameter comparison table will be inserted here -->
                    </div>
                </div>

                <!-- Performance Analysis -->
                <div class="performance-analysis-section">
                    <h3 class="section-title">ğŸ† Performance-Analyse</h3>
                    <div class="performance-summary" id="performanceSummary">
                        <!-- Dynamic performance analysis will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Configuration Save Modal -->
    <div id="saveConfigModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ’¾ Konfiguration speichern</h2>
                <span class="modal-close" id="closeSaveModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="configName" class="form-label">Name der Konfiguration</label>
                    <input type="text" id="configName" class="form-input" 
                           placeholder="z.B. Vergleich ETF vs Festgeld 2025" 
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="configDescription" class="form-label">Beschreibung (optional)</label>
                    <textarea id="configDescription" class="form-textarea" 
                              placeholder="Beschreibung der verschiedenen Szenarien und Annahmen..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelSaveConfig">Abbrechen</button>
                <button class="btn btn-primary" id="confirmSaveConfig" disabled>ğŸ’¾ Speichern</button>
            </div>
        </div>
    </div>

    <!-- Export Options Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ“¤ Vergleich exportieren</h2>
                <span class="modal-close" id="closeExportModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <h4>Welche Daten mÃ¶chten Sie exportieren?</h4>
                    <div class="export-option-group">
                        <label class="export-option">
                            <input type="checkbox" id="exportJSON" checked>
                            <span class="checkmark"></span>
                            <div class="option-content">
                                <strong>JSON-Datei</strong>
                                <p>VollstÃ¤ndige Konfiguration zum Wiederherstellen</p>
                            </div>
                        </label>
                        <label class="export-option">
                            <input type="checkbox" id="exportCSV" checked>
                            <span class="checkmark"></span>
                            <div class="option-content">
                                <strong>CSV-Tabelle</strong>
                                <p>Parameter und Ergebnisse fÃ¼r Excel/Calc</p>
                            </div>
                        </label>
                        <label class="export-option">
                            <input type="checkbox" id="exportChart">
                            <span class="checkmark"></span>
                            <div class="option-content">
                                <strong>Diagramm (PNG)</strong>
                                <p>Aktuelles Diagramm als Bilddatei</p>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelExport">Abbrechen</button>
                <button class="btn btn-primary" id="confirmExport">ğŸ“¤ Exportieren</button>
            </div>
        </div>
    </div>

    <!-- Disclaimer Footer -->
    <footer class="disclaimer-footer">
        <div class="disclaimer-content">
            <strong>âš ï¸ Wichtiger Haftungsausschluss:</strong> 
            Alle Berechnungen sind SchÃ¤tzungen basierend auf den eingegebenen Parametern. 
            TatsÃ¤chliche Anlagerenditen kÃ¶nnen erheblich variieren und sind nicht garantiert. 
            Vergangene Wertentwicklung ist kein Indikator fÃ¼r zukÃ¼nftige Ergebnisse. 
            Diese Anwendung ersetzt keine professionelle Finanzberatung. 
            Bitte konsultieren Sie einen qualifizierten Finanzberater fÃ¼r persÃ¶nliche Anlageentscheidungen.
        </div>
    </footer>
</body>
</html>